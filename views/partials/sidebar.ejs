<%
    const menuItems = [
        { 
            id: 'dashboard', 
            label: 'Dasbor', 
            path: '/dashboard', 
            icon: 'ri-dashboard-line', 
            activeClass: 'bg-blue-50 text-blue-700 shadow-sm border-r-4 border-blue-500',
            hoverClass: 'hover:bg-gray-50 hover:text-blue-700'
        },
        { 
            id: 'auto-reply', 
            label: 'Balas Otomatis', 
            path: '/auto-reply', 
            icon: 'ri-reply-all-line', 
            activeClass: 'bg-orange-50 text-orange-700 shadow-sm border-r-4 border-orange-500',
            hoverClass: 'hover:bg-gray-50 hover:text-orange-700'
        },
        { 
            id: 'api-keys', 
            label: 'Kunci API', 
            path: '/api-keys', 
            icon: 'ri-key-line', 
            activeClass: 'bg-indigo-50 text-indigo-700 shadow-sm border-r-4 border-indigo-500',
            hoverClass: 'hover:bg-gray-50 hover:text-indigo-700'
        },
        { 
            id: 'users', 
            label: 'Users', 
            path: '/users', 
            icon: 'ri-group-line', 
            activeClass: 'bg-purple-50 text-purple-700 shadow-sm border-r-4 border-purple-500',
            hoverClass: 'hover:bg-gray-50 hover:text-purple-700',
            adminOnly: true
        },
        { 
            id: 'settings', 
            label: 'Pengaturan', 
            path: '/settings', 
            icon: 'ri-settings-3-line', 
            activeClass: 'bg-gray-50 text-teal-700 shadow-sm border-r-4 border-teal-500',
            hoverClass: 'hover:bg-gray-50 hover:text-teal-700',
            adminOnly: true
        },
        { 
            id: 'documentation', 
            label: 'Dokumentasi', 
            path: '/documentation', 
            icon: 'ri-file-text-line', 
            activeClass: 'bg-gray-50 text-gray-800 shadow-sm border-r-4 border-gray-500',
            hoverClass: 'hover:bg-gray-50 hover:text-gray-800'
        }
    ];

    const filteredMenuItems = menuItems.filter(item => {
        if (item.adminOnly && (!locals.user || locals.user.role !== 'admin')) return false;
        return true;
    });
%>
<aside class="w-64 bg-white shadow-lg border-r border-gray-200 hidden lg:flex flex-col fixed inset-y-0 left-0 h-screen overflow-y-auto z-50" id="sidebar">
    <div class="p-6 border-b border-gray-200">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-linear-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg">
                    <i class="ri-whatsapp-line text-white text-xl"></i>
                </div>
                <h1 class="text-xl font-bold text-gray-800">WA Webhook</h1>
            </div>
        </div>
    </div>
    <nav class="flex-1 py-6 overflow-y-auto">
        <ul class="space-y-2 px-4">
            <% filteredMenuItems.forEach(item => { %>
                <% 
                    const isActive = typeof page !== 'undefined' && page === item.id;
                %>
                <li>
                    <a href="<%= item.path %>" 
                       class="group flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-700 transition-all duration-200 <%= isActive ? item.activeClass : item.hoverClass %>">
                        <i class="<%= item.icon %> text-lg group-hover:scale-110 transition-transform"></i>
                        <span class="font-medium"><%= item.label %></span>
                    </a>
                </li>
            <% }); %>
        </ul>
    </nav>

    <!-- Footer -->
    <div class="p-4 border-t border-gray-200 bg-gray-50">
        <div class="text-center">
            <p class="text-xs text-gray-500">Version 1.0.0</p>
            <p class="text-xs text-gray-400 mt-1">WhatsApp Webhook</p>
        </div>
    </div>
</aside>
